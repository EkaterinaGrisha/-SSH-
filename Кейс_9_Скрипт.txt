nano ssh_agent.sh

#!/bin/bash

# Настройка и использование SSH-агента
echo "=== Настройка SSH-агента ==="

# Запускаем SSH-агент
echo "1. Запускаем SSH-агент..."
eval "$(ssh-agent -s)"

# Добавляем ключи в SSH-агент
echo "2. Добавляем ключи в SSH-агент..."
ssh-add ~/.ssh/id_rsa

# Проверяем добавленные ключи
echo "3. Проверяем добавленные ключи..."
ssh-add -l

# Запрос данных для подключения
read -p "Введите имя пользователя: " username
read -p "Введите IP-адрес сервера: " ip_address

# Подключаемся с использованием SSH-агента
echo "4. Подключаемся к серверу с использованием SSH-агента..."
ssh $username@$ip_address "echo 'Успешное подключение через SSH-агент!'"

# Показываем команды для ручного управления
echo "5. Команды для управления SSH-агентом:"
echo "   ssh-agent -s          # Запустить агент"
echo "   ssh-add ~/.ssh/id_rsa # Добавить ключ"
echo "   ssh-add -l            # Список ключей"
echo "   ssh-add -D            # Удалить все ключи"

chmod +x ssh_agent.sh
./ssh_agent.sh